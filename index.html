<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>GifTastic</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="style.css">.
</head>
<body>

  <!-- predisposed villain buttons -->
  <button data-villain="jafar">Jafar</button>
  <button data-villain="ursula">Ursula</button>
  <button data-villain="yzma">Yzma</button>
  <!-- Where I plan on appending the images? -->
    <div id="images"> 
    </div>

  <!-- =============================== SEARCH BUTTON ========================================= -->

    <div class="input-group mb-3">
        <input type="text" class="form-control" placeholder="Add More Chaos" aria-label="Add More Chaos" aria-describedby="button-addon2">
        <div class="input-group-append">
          <button class="btn btn-outline-secondary" type="button" id="gifsearch">MUAHAHA</button>
        </div>
      </div>

      <!-- API KEY 7429ws6piuEB26imq9yjxJmwY4Tn7UEj -->

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
  
   
    <!-- =============================== MAIN PROCESS ========================================= -->
    <script type="text/javascript">

    // Define my theme: Disney villains
    // var topics = ["jafar", "ursula", "yzma"] // do I need this array? 

        // Event listener for our gifbutton 
        $("#gifsearch").on("click", function() {
    
          // Grab and store the data-villain property value from the button
          var villain = $(this).attr("data-villain"); // or would I use var topics in this place? 

          // // Storing our giphy API URL for random images
          // var queryURL = "https://api.giphy.com/v1/gifs/random?api_key=7429ws6piuEB26imq9yjxJmwY4Tn7UEj";
          var queryURL = "https://api.giphy.com/v1/gifs/search?q=" + villain + "&api_key=7429ws6piuEB26imq9yjxJmwY4Tn7UEj";
    
          // Perfoming an AJAX GET request to our queryURL
          $.ajax({
            url: queryURL,
            method: "GET"
          })
    
          // After the data from the AJAX request comes back
            .then(function(response) {
              console.log(queryURL)
              console.log(response); // I only saw these console.logs from the examples.

            // store data from the AJAX request in the results variable
            var results = response.data;

            // create for loop to loop through each result item
            for (var i = 0; i < results.length; i++) {

              // create and store a div tag 
              var villainDiv = $("<div>");
              
              // create and store an image tag
              var villainImage = $("<img>");

              // Set the src attribute of the image to a property pulled off the result item
              villainImage.attr("src", results[i].images.fixed_height.url); // can we explain what this means
    
              // Append image tag to villainDiv
              villainDiv.append(villainImage);

              // Prepend the villainImage to the HTML page in the "images" div
              $("#images").prepend(villainImage);
            }

          });

        });

      //  =============================== GIPHY STATE FUNCTIONALITY ========================================= 

    $("#images").on("click", function() {

      // The attr jQuery method allows us to get or set the value of any attribute on our HTML element
      var state = $(this).attr("data-state");

      if (state === "still") {
        $(this).attr("src", $(this).attr("data-animate"));
        $(this).attr("data-state", "animate");
      } else {
        $(this).attr("src", $(this).attr("data-still"));
        $(this).attr("data-state", "still");
      }
    });
    
    // can we also walk through this code? Sort of doesn't make sense to me. 

  </script>
</body>
</html>

